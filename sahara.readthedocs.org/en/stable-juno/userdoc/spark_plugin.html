<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Spark Plugin &mdash; Sahara</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2014.2.1.dev1.ga7031f6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <link rel="top" title="Sahara" href="../index.html" />
    <link rel="next" title="Elastic Data Processing (EDP)" href="edp.html" />
    <link rel="prev" title="Hortonworks Data Platform Plugin" href="hdp_plugin.html" />
 
<!-- RTD Extra Head -->



<!-- 
Read the Docs is acting as the canonical URL for your project. 
If you want to change it, more info is available in our docs:
  http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://sahara.readthedocs.org/en/latest/userdoc/spark_plugin.html" />

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "sahara",
    version: "stable-juno",
    language: "en",
    page: "userdoc/spark_plugin",
    builder: "sphinx",
    theme: "_theme_rtd",
    docroot: "/doc/source/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org",
    commit: "a7031f66c258c0d1c11e0667599cb8a28ed79e7d"
  }
  // Old variables
  var doc_version = "stable-juno";
  var doc_slug = "sahara";
  var page_name = "userdoc/spark_plugin";
  var html_theme = "_theme_rtd";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="spark-plugin">
<h1>Spark Plugin<a class="headerlink" href="#spark-plugin" title="Permalink to this headline">¶</a></h1>
<p>The Spark Sahara plugin provides a way to provision Apache Spark clusters on
OpenStack in a single click and in an easily repeatable fashion.</p>
<p>Currently Spark is installed in standalone mode, with no YARN or Mesos support.</p>
<div class="section" id="images">
<h2>Images<a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h2>
<p>For cluster provisioning prepared images should be used. The Spark plugin
has been developed and tested with the images generated by the <a class="reference internal" href="diskimagebuilder.html"><em>Building Images for Vanilla Plugin</em></a>.
Those Ubuntu images already have Cloudera CDH4 HDFS and Apache Spark installed.
A prepared image can be found at the following location:</p>
<ul class="simple">
<li><a class="reference external" href="http://sahara-files.mirantis.com/sahara-juno-spark-1.0.0-ubuntu-14.04.qcow2">http://sahara-files.mirantis.com/sahara-juno-spark-1.0.0-ubuntu-14.04.qcow2</a></li>
</ul>
<p>The Spark plugin requires an image to be tagged in Sahara Image Registry with
two tags: &#8216;spark&#8217; and &#8216;&lt;Spark version&gt;&#8217; (e.g. &#8216;1.0.0&#8217;).</p>
<p>Also you should specify the username of the default cloud-user used in the image. For
images generated with the DIB it is &#8216;ubuntu&#8217;.</p>
<p>Note that the Spark cluster is deployed using the scripts available in the
Spark distribution, which allow to start all services (master and slaves), stop
all services and so on. As such (and as opposed to CDH HDFS daemons), Spark is
not deployed as a standard Ubuntu service and if the virtual machines are
rebooted, Spark will not be restarted.</p>
</div>
<div class="section" id="spark-configuration">
<h2>Spark configuration<a class="headerlink" href="#spark-configuration" title="Permalink to this headline">¶</a></h2>
<p>Spark needs few parameters to work and has sensible defaults. If needed they
can be changed when creating the Sahara cluster template. No node group options
are available.</p>
<p>Once the cluster is ready, connect with ssh to the master using the &#8216;ubuntu&#8217;
user and the appropriate ssh key. Spark is installed in /opt/spark and should
be completely configured and ready to start executing jobs. At the bottom of
the cluster information page from the OpenStack dashboard, a link to the Spark
web interface is provided.</p>
</div>
<div class="section" id="cluster-validation">
<h2>Cluster Validation<a class="headerlink" href="#cluster-validation" title="Permalink to this headline">¶</a></h2>
<p>When a user creates an Hadoop cluster using the Spark plugin,
the cluster topology requested by user is verified for consistency.</p>
<p>Currently there are the following limitations in cluster topology for the Spark plugin:</p>
<blockquote>
<div><ul class="simple">
<li>Cluster must contain exactly one HDFS namenode</li>
<li>Cluster must contain exactly one Spark master</li>
<li>Cluster must contain at least one Spark slave</li>
<li>Cluster must contain at least one HDFS datanode</li>
</ul>
</div></blockquote>
<p>The tested configuration puts the NameNode co-located with the master and a DataNode
with each slave to maximize data locality.</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Swift support is not available in Spark. Once it is developed there, it will be
possible to add it to this plugin.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Spark Plugin</a><ul>
<li><a class="reference internal" href="#images">Images</a></li>
<li><a class="reference internal" href="#spark-configuration">Spark configuration</a></li>
<li><a class="reference internal" href="#cluster-validation">Cluster Validation</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="hdp_plugin.html"
                        title="previous chapter">Hortonworks Data Platform Plugin</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="edp.html"
                        title="next chapter">Elastic Data Processing (EDP)</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/userdoc/spark_plugin.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="edp.html" title="Elastic Data Processing (EDP)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="hdp_plugin.html" title="Hortonworks Data Platform Plugin"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Sahara</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, OpenStack Foundation.
      Last updated on Thu Oct 16 09:59:51 2014, commit a7031f6.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>